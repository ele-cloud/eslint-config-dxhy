language: node_js
node_js:
    - lts/*

if: tag IS present

before_install:
    - echo -e "Host 121.36.50.216\n\tStrictHostKeyChecking no\n\tIdentityFile" $ID_RSA_YANGYONG
        >> ~/.ssh/config

addons:
    ssh_known_hosts: 121.36.50.216

install:
    - npm i

script:
    - npm run build

after_success:
    - cd ./dist/
    - echo å‡†å¤‡ç§»åŠ¨è‡³æŒ‡å®šæ–‡ä»¶å¤¹...
    - travis_wait 30 scp -o stricthostkeychecking=no -rC ./* root@121.36.50.216:/root/dxhy/eslint-config-dxhy
    - echo website published!ðŸ˜Š

deploy:
    provider: npm
    edge: true
    email: $NPM_EMAIL
    api_key: $NPM_TOKEN
    on:
        tags: true
        repo: ele-cloud/eslint-config-dxhy
    skip_cleanup: true

after_deploy:
    - echo npm published!ðŸ˜Š

# keep the npm cache around to speed up installs
cache:
    directories:
        - '$HOME/.npm'
